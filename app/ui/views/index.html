<!DOCTYPE html>
<html>
  <head>
    <title>Radiodan Remote Control</title>
    <link rel="stylesheet" href="assets/css/lib/pure-min.css">
    <link rel="stylesheet" href="assets/css/modules/layout.css">
    <link rel="stylesheet" href="assets/css/modules/panel.css">
    <link rel="stylesheet" href="assets/css/app.css">
  </head>

  <body>
    <script data-ui-template type="text/ractive">
      {% raw %}
        <section id="masthead" class="layout">
          {{#radio.power}}
          <p class="lo-left {{ isOn ? 'is-on' : 'is-off' }}">
            <a  on-tap="power"
                href="/power">Turn {{ isOn ? 'Off' : 'On' }}</a>
          </p>
          {{/radio.power}}
          <p class="lo-center">
            <span>Radiodan icon</span>
          </p>
          <p class="lo-right {{ isOn ? 'is-on' : 'is-off' }}">
            <a on-tap="settings-button">setup</a>
          </p>
        </section>

        {{^ui.panels.settings.isOpen}}
        <section id="playout" class="layout">
          <p class="lo-left">
            <a on-tap="stations-button">
              {{ ui.panels.services.isOpen ? '⬇' : '⬆' }}
              {{^radio.current}}
                No current station
              {{/radio.current}}
              {{#radio.current}}
                  {{title}}
              {{/radio.current}}
            </a>
          </p>

          <p class="lo-right">
            {{ ui.panels.volume.isOpen ? '⬇' : '⬆' }}
            <a on-tap="volume-button">Volume</a>
          </p>
        </section>

        <section id="volume" class="layout panel {{ ui.panels.volume.isOpen ? '' : 'is-closed' }}">
          {{#radio.audio}}
          <p class="lo-center">
            <input type="range"
                   on-change="volume"
                   min="0" max="100" value="{{volume}}" />
          </p>
          {{/radio.audio}}
        </section>

        <section  id="services"
                  class="layout panel services {{ ui.panels.services.isOpen ? '' : 'is-closed' }}">
          <ul class="service-list">
          {{#services}}
            <li on-tap="service"
                class="service-item {{ radio.current.id === id ? 'is-playing' : '' }}">
              <a  href="/radio/service/{{ id }}">
                <img src="{{ logos.svg }}" alt="{{ title }}" />
              </a>
            </li>
          {{/services}}
          </ul>
        </section>

        <section id="metadata" class="layout">
          {{#radio.current}}
            {{#first(nowAndNext)}}
            <div class="current-programme">
              <p>{{ brand }}</p>
              <p>{{ episode }}</p>
              {{#image}}
                <img src="{{ imageUrl(templateUrl, '464x261') }}" />
              {{/image}}
            </div>
            {{/nowAndNext}}
            {{#nowPlaying}}
            <div class="current-programme">
              <p>{{ title }}</p>
              <p>{{ artist }}</p>
            </div>
            {{/nowPlaying}}
          {{/radio.current}}
        </section>

        <section id="behaviours">
          <h2>Magic Button</h2>
          <ul>
            {{#radio.magic}}
              {{#avoider}}
              <li on-tap="avoid">
                {{^isAvoiding}}
                  <a href="/avoider/">Avoider</a>
                {{/isAvoiding}}
                {{#isAvoiding}}
                  <a href="/avoider/">Cancel avoiding</a>
                {{/isAvoiding}}
              </li>
              {{/avoider}}
            {{/radio.magic}}
          </ul>
        </section>
        {{/ui.panels.settings.isOpen}}

        {{#ui.panels.settings.isOpen}}
        <section id="settings">
          <h2>Settings</h2>
          {{#radio.magic.avoider.settings}}
          <div>
            <h2>Avoider</h2>
            <label>Avoid:
              <span>{{ avoidType }}</span>
            </label>
            <label>with:
              <span>{{ serviceId }}</span>
            </label>
          </div>
          {{/radio.magic.avoider.settings}}
        </section>
        {{/ui.panels.settings.isOpen}}
      {% endraw %}
    </script>

    <div data-ui-container>
    </div>

    <script src="assets/js/app.{% if isDebug %}debug.{% endif %}js"></script>
  </body>
</html>
